<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <title>AniMuse</title>
  <link rel="stylesheet" href="styles/canvas.css">
  <link rel="stylesheet" href="styles/animationPanel.css">
  <link rel="stylesheet" href="styles/interactionPanel.css">
  <link rel="stylesheet" href="styles/speechRecognition.css">
  <link rel="stylesheet" href="styles/llm.css">
</head>
<body>
  <h1 class="brand-heading">AniMuse</h1>
  <div id="toolbar">
    <label>Color <input type="color" id="colorPicker" value="#000000"></label>
    <label>Size <input type="range" id="sizePicker" min="1" max="40" value="4"></label>
    <div class="buttons">
      <button id="drawBtn" title="Draw Mode (Ctrl/Cmd + B)">Draw</button>
      <button id="selectBtn" title="Select Mode (Ctrl/Cmd + E)">Select</button>
      <button id="animateBtn" title="Animate Selected (Ctrl/Cmd + M)">Animate</button>
      <button id="groupBtn" title="Group Selected (Ctrl/Cmd + G)">Group</button>
      <button id="deleteBtn" title="Delete Selected (Delete)">Delete</button>
      <button id="pauseBtn" title="Pause Animations (Ctrl/Cmd + K)">Pause</button>
      <button id="undoBtn" title="Undo (Ctrl/Cmd + Z)">Undo</button>
      <button id="redoBtn" title="Redo (Ctrl/Cmd + Shift + Z)">Redo</button>
    </div>
  </div>
  <div id="animationPanel">
    <div class="animation-panel-header">
      <h4 class="panel-header">Animations</h4>
      <div class="sort-controls">
        <label for="sortAnimations">Sort by:</label>
        <select id="sortAnimations">
          <option value="latest">Latest Created</option>
          <option value="oldest">Oldest Created</option>
          <option value="recently-updated">Recently Updated</option>
        </select>
      </div>
    </div>
    <div id="animation-entries">
      <!-- Animation entries will be rendered here -->
    </div>
  </div>
  <button class="panel-collapse-btn animation-collapse" title="Toggle Animation Panel"></button>

  <div id="interactionPanel">
    <div class="interaction-panel-header">
      <h4 class="panel-header">Interactions</h4>
      <div class="display-controls">
        <label for="displayInteractions">Display:</label>
        <select id="displayInteractions">
          <option value="order">Animation Order</option>
          <option value="interactions">Animation Interactions</option>
        </select>
      </div>
    </div>
    <div id="interaction-entries">
      <!-- Object entries will be rendered here -->
    </div>
  </div>
  <button class="panel-collapse-btn interaction-collapse" title="Toggle Interaction Panel"></button>
  <button class="help-button" title="Help">?</button>
  <div class="help-overlay">
    <div class="help-content">
      <button class="help-close">Ã—</button>
      <h2>Welcome to AniMuse!</h2>
      
      <div class="help-section">
        <h3>Getting Started</h3>
        <p>AniMuse is an interactive canvas where you can draw, animate, and bring your creativity to life. Here's how to get started:</p>
        <ul>
          <li>Use the <span class="keyboard-shortcut">Draw</span> tool to create shapes and lines</li>
          <li>Select colors and brush sizes from the toolbar</li>
          <li>Switch to <span class="keyboard-shortcut">Select</span> mode to modify existing objects</li>
          <li>Group multiple objects using the <span class="keyboard-shortcut">Group</span> tool</li>
        </ul>
      </div>

      <div class="help-section">
        <h3>Creating Animations</h3>
        <p>Turn your drawings into dynamic animations:</p>
        <ul>
          <li>Select an object or group</li>
          <li>Click <span class="keyboard-shortcut">Animate</span> or press <span class="keyboard-shortcut">Ctrl/Cmd + M</span></li>
          <li>Choose from animation types: birds, sway, or hop</li>
          <li>Use <span class="keyboard-shortcut">Pause</span> to freeze all animations</li>
        </ul>
      </div>

      <div class="help-section">
        <h3>Animation Types & Interactions</h3>
        <p>AniMuse offers several unique animation styles that can interact with each other:</p>
        <ul>
          <li><strong>Birds Animation:</strong> Objects move in flocking patterns, following and avoiding each other like a flock of birds</li>
          <li><strong>Sway Animation:</strong> Objects gently swing back and forth, creating a peaceful pendulum motion</li>
          <li><strong>Hop Animation:</strong> Objects bounce around the canvas, either individually or in groups</li>
          <li><strong>Fix Animation:</strong> Creates a static animation that can be used in interactions</li>
        </ul>
        <p>Interactions:</p>
        <ul>
          <li>Bird-animated objects will flock together and avoid obstacles</li>
          <li>Multiple swaying objects can create beautiful wave-like patterns</li>
          <li>Hopping objects can be synchronized or randomized</li>
          <li>Mix different animations to create complex, dynamic scenes</li>
          <li>Use the Interaction Panel to view and manage how objects influence each other</li>
        </ul>
      </div>

      <div class="help-section">
        <h3>Managing Your Work</h3>
        <p>Keep track of your animations and interactions:</p>
        <ul>
          <li>View all animations in the left panel</li>
          <li>Manage object interactions in the right panel</li>
          <li>Use <span class="keyboard-shortcut">Undo</span> (<span class="keyboard-shortcut">Ctrl/Cmd + Z</span>) and <span class="keyboard-shortcut">Redo</span> (<span class="keyboard-shortcut">Ctrl/Cmd + Shift + Z</span>) for corrections</li>
          <li>Delete selected objects with the <span class="keyboard-shortcut">Delete</span> key</li>
        </ul>
      </div>

      <div class="help-section">
        <h3>Keyboard Shortcuts</h3>
        <ul>
          <li><span class="keyboard-shortcut">Ctrl/Cmd + B</span> - Draw Mode</li>
          <li><span class="keyboard-shortcut">Ctrl/Cmd + E</span> - Select Mode</li>
          <li><span class="keyboard-shortcut">Ctrl/Cmd + M</span> - Animate Selected</li>
          <li><span class="keyboard-shortcut">Ctrl/Cmd + G</span> - Group Selected</li>
          <li><span class="keyboard-shortcut">Ctrl/Cmd + K</span> - Pause Animations</li>
        </ul>
      </div>

      <div class="help-section">
        <h3>Tips & Tricks</h3>
        <ul>
          <li>Click and drag to select multiple objects</li>
          <li>Double-click an animation to edit its settings</li>
          <li>Use the panels' collapse buttons to maximize canvas space</li>
          <li>Experiment with different animation combinations!</li>
        </ul>
      </div>
    </div>
  </div>

  <div id="editPromptModal" class="modal hidden">
    <div class="modal-content">
      <h3>Edit Animation Settings</h3>
      <div class="input-group">
        <label for="editPromptInput">Animation Prompt:</label>
        <input id="editPromptInput" type="text" placeholder="birds, sway, hop, or fix" />
      </div>
      <div class="modal-buttons">
        <button id="savePromptBtn">Save</button>
        <button id="cancelPromptBtn">Cancel</button>
      </div>
    </div>
  </div>
  <div id="canvasWrapper">
    <canvas id="canvas" width="1000" height="800"></canvas>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/fabric@6.4.3/dist/index.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script type="module" src="js/main.js"></script>
</body>
</html>